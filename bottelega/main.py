import randomimport constantimport telebotfrom telebot import typesimport loggingfrom subprocess import call# настройки для журналаlogger = logging.getLogger('log')logger.setLevel(logging.INFO)fh = logging.FileHandler('someTestBot.log')fh.setLevel(logging.DEBUG)formatter = logging.Formatter("%(asctime)s | %(levelname)-7s | %(message)s")fh.setFormatter(formatter)logger.addHandler(fh)help_string = []help_string.append("Это простой *тестовый бот*, созданный в обучающих целях.\n\n")help_string.append("/start - выводит приветствие;\n")help_string.append("/help - отображает эту справку;\n")help_string.append("/server - присылает статус сервера.")bot = telebot.TeleBot(constant.TOKEN)@bot.message_handler(commands=['help', 'start'])def send_welcome(message):    markup = types.ReplyKeyboardMarkup(resize_keyboard=1)    markup.add('1', '2')    markup.add('3', '4')    msg = bot.reply_to(message, 'Привет выбери из меню', reply_markup=markup)    bot.register_next_step_handler(msg, process_step)#"@bot.message_handler(commands = ['switch'])#def switch(message):#    markup = types.InlineKeyboardMarkup()#    switch_button = types.InlineKeyboardButton(text='Try', switch_inline_query="Telegram")#    markup.add(switch_button)#    bot.send_message(message.chat.id, "Выбрать чат", reply_markup = markup)@bot.message_handler()def process_step(message):    chat_id = message.chat.id    if message.text=='1':                keyboard=types.InlineKeyboardMarkup()                callback_button = types.InlineKeyboardButton(text='1', callback_data="text")                switch_button = types.InlineKeyboardButton(text='2', switch_inline_query_current_chat="")                keyboard.add(callback_button, switch_button)                bot.send_message(message.chat.id, "выбери из меню", reply_markup=keyboard)    elif message.text=='2':                keyboard = types.ReplyKeyboardMarkup(resize_keyboard=1)                callback_button = types.InlineKeyboardButton(text="Нажми меня", callback_data="test")                keyboard.add(callback_button)                bot.send_message(message.chat.id, "Я – сообщение из обычного режима", reply_markup=keyboard)    else:        message.text=='3','4'        keyboard = types.ReplyKeyboardMarkup(row_width=1, resize_keyboard=True)        button_phone = types.KeyboardButton(text="оставить контакт", request_contact=True)        button_geo = types.KeyboardButton(text="4", request_location=True)        keyboard.add(button_phone, button_geo)        bot.send_message(message.chat.id, "Оставить контакт", reply_markup=keyboard)        #print(message_from_user={'content_type': 'contact', 'message_id': '...'})    #last_upd=upd[-1]    #message_from_user=last_upd.message#print(message_from_user)upd = bot.get_updates(offset=-1)print (upd)def get_upd():    URL = 'http://api.telegram.org/bot' + constant.TOKEN + '/'    url = URL + 'getupdates'    r = allowed_updates + ["edit_channel_post", "callback_query"]    print(url, r)#print(last_upd)#https://api.telegram.org/bot666313419:AAG3ZIwXgb-xLoTryb2oVMmE950r52cKLZw/sendMessage?chat_id=167674916&text=Successfullif __name__ == '__main__':    bot.polling(none_stop=True, interval=0)    updater.start_polling(none_stop=True, interval=0)